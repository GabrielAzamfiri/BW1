<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Timer</title>
    <link rel="stylesheet" href="reset.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/LucaCuello/Circular-Countdown-Template@95af10a/css/countdown.css"
    />
    <link rel="stylesheet" href="styletimer.css" />
  </head>
  <body>
    <div id="time">
      <div class="circle">
        <div class="dots secDot" style="--crl: grey"></div>
        <svg>
          <circle cx="70" cy="70" r="70"></circle>
          <circle cx="70" cy="70" r="70" id="ss"></circle>
        </svg>
        <div class="seconds">
          <span class="span">seconds</span>
          <div id="timerSeconds">60</div>
          <span class="span">remaining</span>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/gh/LucaCuello/Circular-Countdown-Template@95af10a/js/index.js"></script>
    <script>
      let ss = document.getElementById("ss");
      let secDot = document.querySelector(".secDot");

      /* funnzione per il timer */
      let tempoRimanente = 60;
      const countdownElement = document.getElementById("timerSeconds");
      /* Imposto lo strokeDasharray per il cerchio */
      const lunghezzaCirconferenza = 440; // Circonferenza del cerchio
      ss.style.strokeDasharray = lunghezzaCirconferenza;

      function aggiornamentoCountdown() {
        /* decrementa il tempo rimanente */
        tempoRimanente--;
        /* aggiorna il tempo */
        countdownElement.textContent = tempoRimanente;
        /* Calcolo lo strokeDashoffset in base al tempo rimanente */
        let percentualeCompletamento = (60 - tempoRimanente) / 60;
        let strokeDashoffset =
          lunghezzaCirconferenza * percentualeCompletamento;
        ss.style.strokeDashoffset = Math.floor(strokeDashoffset);
        /* Calcola l'angolo di rotazione per il puntino */
        let angoloRotazione = percentualeCompletamento * 360;
        secDot.style.transform = `rotate(${angoloRotazione}deg)`;
        /* se scade il tempo  */
        if (tempoRimanente <= 0) {
          clearInterval(intervalloCountdown);
          questionResults();
        }
      }
      /* impostiamo l'intervallo di aggiornamento del timer */
      const intervalloCountdown = setInterval(aggiornamentoCountdown, 1000);
      /* la funzione questionResults() Ã¨ gia stata stabilita da un collega */
    </script>
  </body>
</html>
